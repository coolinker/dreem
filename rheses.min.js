var rheses=function(){var t,n,e,s,o,i,r,a,c,u,f,p,d,h,l,m,g=!1,y=$.fn.css;return $.fn.css=function(){var t,n,e,s,o,i;if(y.apply(this,arguments),!g)for(t={},"object"!=typeof arguments[0]?t[arguments[0]]=arguments[1]:t=arguments[0],n=$(this),e=0,s=n.length;s>e;e++)if(o=$.data(n[e],"sendstyle"))for(i in t)o[i]&&n.trigger("style-"+i);return this},t=$.fn.animate,$.fn.animate=function(){var n,e,s,o,i,r,a,c,u=Array.prototype.slice.call(arguments,0);if(!g){"object"!=typeof u[1]&&(u[1]={duration:u[1],easing:u[2],complete:u[3]},u.length=2),n=$(this),e={},s=!1;for(o in u[0])for(i=0,r=n.length;r>i;i++)if(a=$.data(n[i],"sendstyle"),a&&a[o]){s=e[o]=!0;break}s&&(c=u[1].step,u[1].step=function(){c&&c.call(this,arguments);for(var t in e)n.trigger("style-"+t)})}return t.apply(this,u)},n=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,17)},Mouse={left:0,top:0,started:null,dirty:!1,selector:null,sender:function(){this.started&&n(this.sender),this.dirty&&(this.dirty=!1,this.selector.trigger("move"))},handler:function(t){this.dirty=!0,this.left=t.pageX,this.top=t.pageY},start:function(){this.started||(null===this.started&&(this.selector=$(this),this.offset=this.position,this.sender=this.sender.bind(this),this.handler=this.handler.bind(this)),this.started=!0,n(this.sender),$(document).on("mousemove",this.handler),$(document).one("mouseout",this.stop))},stop:function(){this.started&&(this.started=!1,$(document).off("mousemove",this.handler),$(document).one("mouseover",this.start))},position:function(){return this}},e={top:"position().top",left:"position().left",width:"width()",height:"height()",parent:"parent()"},s={scope:"this"},s.process=function(t){var n=function(t){for(;t.object&&"MemberExpression"===t.object.type;)t=t.object;return t.object||t},e=function(t,e){var s=n(t),o=s.name;e&&(s.name="$("+e+")","this"===e&&(s.name+="."+o))};this.scope="this",acorn.walkDown(t,this),e(t,this.scope)},s.Identifier=function(t){var n,o=t.name;o in e?t.name=e[o]:o in window&&(n=window[o],s.scope=n instanceof HTMLElement?"'#"+o+"'":n===window||n===document?o:null)},s.ThisExpression=function(t){t.type="Identifier",t.name="$(this)",s.scope=null},o={},o.MemberExpression=function(t){return s.process(t),!0},i={foundScopes:[]},r={Math:!0},i.MemberExpression=function(t){if(t.object.name in r)return!0;var n=t.property.name;return t=t.object,s.process(t),i.foundScopes.push({scope:acorn.stringify(t),propname:n}),!0},findScopes=function(t){var n=acorn.parse(t);return i.foundScopes=[],acorn.walkDown(n,i),i.foundScopes},a=function(t,n){return Function([],t).bind(n)},c=function(t){var n;try{n=acorn.parse(t)}catch(e){return console.error("Failed to parse",t,"for",cssprop,"of",el),!1}return acorn.walkDown(n,o),acorn.stringify(n)},u=function(t,n,e){function s(t,n){t.on(n,i.update),p.push(t,n)}var o,i,r,u,f,p;return parsedExpression=c(e),o=$.data(t,"constraints")||{},$.data(t,"constraints",o),o[n]?!1:(o[n]={scopes:[]},i=o[n],r=$(t),u=a("return "+parsedExpression,r),i.update=function(t){t&&t.stopPropagation(),g||r.css(n,u())},f={},p=i.scopes,findScopes(e).forEach(function(o){var i,c,u,p,d=o.scope,h=o.propname,l=d+"."+h;if(!f[l]&&(i=a("return "+d,r)(),0!==i.length)){if(i.length>1&&console.warn('"'+d+'" may have an error. Found multiple scopes, only using the first in: ',i),c=i&&i[0],c===t&&h===n)return console.warn('Not binding: expression "'+e+'" may have an error binding to own property',n,"on element",t),void 0;f[l]=!0,u=c&&(c===window||"body"===c.localName),!u||"width"!==h&&"height"!==h?i===Mouse&&(Mouse.start(),s(Mouse.selector,"move")):s($(window),"resize"),c instanceof HTMLElement&&(p=$.data(c,"sendstyle")||{},p[h]=!0,$.data(c,"sendstyle",p),s(i,"style-"+h))}}),i.update(),this)},f=function(t,n){var e,s,o,i,r,a,c,u=$.data(t,"constraints");if(u){for(e=u&&u[n],s=e.update,o=e.scopes,i=0,r=o.length;r>i;i+=2)a=o[i],c=o[i+1],$(a).off(c,s);delete u[n]}},p="[r-style]",d=function(t,n){return t=t||p,$(t).each(function(t,e){var s,o;if(void 0===n){if(s=$.data(e,"constraints"))for(o in s)f(e,o)}else f(e,n)}),this},h=function(t){return t=t||p,$(t).each(function(t,n){var e=n.getAttribute("r-style"),s=e.split(";");s.forEach(function(t){var e,s,o;t&&(e=t.indexOf(":"),s=t.substr(0,e).replace(/ /g,""),o=t.substr(e+1),u(n,s,o))})}),this},l=function(t){return t=t||p,$(t).each(function(t,n){var e,s=$.data(n,"constraints");if(!s)return!1;for(e in s)s[e].update()}),this},m=function(t){return g=!t,t&&l(),this},$(window).on("load",function(){h()}),{applyConstraint:u,unbindConstraints:d,bindConstraints:h,setEnabled:m,updateConstraints:l}}();